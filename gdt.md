# GDT

	全局描述符表(Global Descriptor Table) - 用于保护模式寻址

## 实模式 vs 保护模式

| 模式 | 地址位数 | 段寄存器内容 | 段大小 | 寻址方式 |
| :--: | :------: |:----------: | :----: | :------: |
| 实模式 | 16位 | 段基址 | 64K | 段基址 << 4 + 偏移 |
| 保护模式 | 32位(可开启64位) | GDT索引(段选择子) | 不固定 | 段基址(从GDT查找) +偏移 |

## Structure of GDT

| Addr | Length | Description |
| :--: | :----: | :---------: |
| 0x0000 | 2 | Size(GDT所占字节大小-1) |
| 0x0002 | 4 | Offset(GDT自身位置) |
| 0x0004 | 2 | 空白(仅为了对齐占位?) |
| 0x0008 | 8 | Item(GDT表项) |
| .....  | 8 | ... |

## Structure of GDT Item

```
	 0-15 |                       Limit 0:15                      |
	16-31 |                       Base 0:15                       |
	32-47 |         Base 24:31        |    Flag     | Limit 16:19 |
	48-55 |           Access          |         Base 16:23        |
```

| Addr | Length | Description |
| :--: | :----: | :---------: |
| 0-15b,48-51b | 20b | Limit(段限长) |
| 16-31,32-39,56-63b | 32b | Base(段基址) |
| 40-43b | 4b | Type(S=0 - 系统段类型, S=1 - 数据或代码段类型) |
| 44b | 1b | S(描述符类型,0 - 系统,1 - 数据或代码) |
| 45-46b | 2b | DPL(描述符特权级) |
| 47b | 1b | P(段存在标志) |
| 52b | 1b | AVL(系统软件可用位) |
| 53b | 1b | 0 |
| 54b | 1b | D/B(默认操作大小,0 - 16位段,1 - 32位段)
| 55b | 1b | G(粒度?) |
